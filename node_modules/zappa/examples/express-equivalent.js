(function() {

  this.app = require('./zappa')(function() {
    var _this = this;
    this.configure(function() {
      _this.set({
        'view engine': 'jade'
      });
      return _this.use('bodyParser', 'methodOverride', _this.app.router, 'static');
    });
    this.configure({
      development: function() {
        return _this.use({
          errorHandler: {
            dumpExceptions: true,
            showStack: true
          }
        });
      },
      production: function() {
        return _this.use('errorHandler');
      }
    });
    return this.get({
      '/': function() {
        return this.render({
          index: {
            title: 'zappa'
          }
        });
      }
    });
  }).app;

}).call(this);
