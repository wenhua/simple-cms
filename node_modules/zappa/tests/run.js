(function() {
  var port, zappa;

  zappa = require('../src/zappa');

  port = 15800;

  this.tests = {
    'default host and port (INADDR_ANY / 3000)': function(t) {
      var c, c2, c3, c4, zapp;
      t.expect('localhost', '127.0.0.1', '0.0.0.0', '::1');
      t.wait(3000);
      zapp = zappa(function() {
        return this.get({
          '/': 'default'
        });
      });
      c = t.client('http://localhost:3000');
      c.get('/', function(err, res) {
        return t.equal('localhost', res.body, 'default');
      });
      c2 = t.client('http://127.0.0.1:3000');
      c2.get('/', function(err, res) {
        return t.equal('127.0.0.1', res.body, 'default');
      });
      c3 = t.client('http://0.0.0.0:3000');
      c3.get('/', function(err, res) {
        return t.equal('0.0.0.0', res.body, 'default');
      });
      c4 = t.client('http://::1:3000');
      return c4.get('/', function(err, res) {
        return t.equal('::1', res.body, 'default');
      });
    },
    'default host, specified port as number': function(t) {
      var c, c2, zapp;
      t.expect('localhost', '127.0.0.1');
      t.wait(3000);
      zapp = zappa(15801, function() {
        return this.get({
          '/': 'number port'
        });
      });
      c = t.client('http://localhost:15801');
      c.get('/', function(err, res) {
        return t.equal('localhost', res.body, 'number port');
      });
      c2 = t.client('http://127.0.0.1:15801');
      return c2.get('/', function(err, res) {
        return t.equal('127.0.0.1', res.body, 'number port');
      });
    },
    'default host, specified port as string': function(t) {
      var c, c2, zapp;
      t.expect('localhost', '127.0.0.1');
      t.wait(3000);
      zapp = zappa('15802', function() {
        return this.get({
          '/': 'string port'
        });
      });
      c = t.client('http://localhost:15802');
      c.get('/', function(err, res) {
        return t.equal('localhost', res.body, 'string port');
      });
      c2 = t.client('http://127.0.0.1:15802');
      return c2.get('/', function(err, res) {
        return t.equal('127.0.0.1', res.body, 'string port');
      });
    },
    'specified host, specified port as string': function(t) {
      var c, c2, zapp;
      t.expect('localhost', '127.0.0.1');
      t.wait(3000);
      zapp = zappa('localhost', '15803', function() {
        return this.get({
          '/': 'host + string port'
        });
      });
      c = t.client('http://localhost:15803');
      c.get('/', function(err, res) {
        return t.equal('localhost', res.body, 'host + string port');
      });
      c2 = t.client('http://127.0.0.1:15803');
      return c2.get('/', function(err, res) {
        return t.equal('127.0.0.1', res.body, 'host + string port');
      });
    }
  };

}).call(this);
